(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=(n(66),n(36)),l=n(11),u=n.n(l),s=n(19),m=n(10),d=n(112),f=(n(68),function(e){return r.a.createElement("h1",{id:"app-title"},e.children)}),p=(n(69),function(){return r.a.createElement("div",{className:"help-text"},r.a.createElement("p",null,r.a.createElement("strong",null," Search engine is very flexible. How it works:"),r.a.createElement("br",null),"To make it more precise put the city's name, comma, 2-letter country code (ISO3166). You will get all proper cities in chosen country. The order is important - the first is city name then comma then country. Example - London, GB or New York, US."))}),h=function(){return r.a.createElement("div",null,"Loading...")},v=function(e){var t=e.children;return r.a.createElement("small",{style:{color:"red"}},t)},g=0,E=1,b=r.a.createContext(g),y=n(59),w=n(110),k=n(114),O=(n(70),function(e){var t=e.activeTab,n=e.children;return r.a.createElement(k.a,{defaultActiveKey:t,transition:!1,bsPrefix:"nv",variant:"weather-tabs"},n)}),x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function C(e){return x[e.getDay()]}n(76);var j=n(25),S=n.n(j);S.a.pluginService.register({beforeRender:function(e){e.config.options.showAllTooltips&&(e.pluginTooltips=[],e.config.data.datasets.forEach((function(t,n){e.getDatasetMeta(n).data.forEach((function(t,n){e.pluginTooltips.push(new S.a.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips,_active:[t]},e))}))})),e.options.tooltips.enabled=!1)},afterDraw:function(e,t){if(e.config.options.showAllTooltips){if(!e.allTooltipsOnce){if(1!==t)return;e.allTooltipsOnce=!0}e.options.tooltips.enabled=!0,S.a.helpers.each(e.pluginTooltips,(function(e){e.initialize(),e.update(),e.pivot(),e.transition(t).draw()})),e.options.tooltips.enabled=!1}}});var M=function(e){var t=e.labels,n=e.data,c=e.tickMax,o=e.tickStep,i=Object(a.useRef)();return Object(a.useEffect)((function(){new S.a(i.current,{type:"line",data:{labels:t,datasets:[{data:n,backgroundColor:"#fef9cc",borderColor:"#fbe000",borderWidth:1}]},options:{bezierCurve:!1,showAllTooltips:!0,responsive:!0,layout:{padding:{left:0,right:0,top:0,bottom:0}},tooltips:{backgroundColor:"white",caretSize:0,bodyFontSize:13,bodyFontFamily:"Roboto, Helvetica, Sans-Serif",bodyFontColor:"#666",displayColors:!1,yAlign:"bottom",yPadding:0,caretPadding:6,callbacks:{title:function(e,t){return""},label:function(e,t){return"".concat(t.datasets[0].data[e.index],"\xb0")}}},legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#666",fontFamily:"Roboto, Helvetica, Sans-Serif",fontSize:13}}],yAxes:[{display:!1,ticks:{beginAtZero:!0,suggestedMax:c,stepSize:o}}]}}})})),r.a.createElement("canvas",{ref:i,height:"60"})},T=n(41),z=n.n(T),F=n(42),D=n.n(F),A=n(49),R=n.n(A),U=n(50),N=n.n(U),W=n(43),L=n.n(W);function P(e){switch(e.weather[0].main){case"Rain":return L.a;case"Clouds":return D.a;default:return z.a}}function _(e){return 9*e/5+32}var H=function(e){var t=e.day,n=e.timezone,c=Object(a.useContext)(b),o=function(e){return Math.round(c===g?e:_(e))};return r.a.createElement("div",{className:"daily-card"},r.a.createElement("div",null,function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"".concat(C(n)," ").concat(n.getDate())}(t.dt,n)),r.a.createElement("img",{src:P(t),alt:"weather Image"}),r.a.createElement("div",null,o(t.temp.max),"\xb0"),r.a.createElement("div",null,o(t.temp.min),"\xb0"))},I=function(e){var t=e.threeFive,n=e.oneCall,c=Object(a.useContext)(b),o=n.daily.slice(0,5),i=n.timezone_offset,l=function(e){return e.map((function(e){return function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"".concat(n.toLocaleTimeString([],{hour:"numeric",timeZone:"UTC"}))}(e.dt,i)}))},u=function(e){return e.map((function(e){return t=e.main.temp,Math.round(c===g?t:_(t));var t}))},s=function(e,t){return{title:function(e){return r.a.createElement(H,{day:e,timezone:i})}(e),labels:l(t),data:u(t)}},m=function(e,t){var n=[],a=-1;return e.forEach((function(e,t){var r=function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),n}(e.dt,i).getDate();r!==a&&n.push(t),a=r})),e.slice(n[t],n[t]+8)};return r.a.createElement("div",{className:"daily-weather"},r.a.createElement(O,{activeTab:"tab-0"},o.map((function(e,n){var a=m(t.list,n),o=s(e,a);return r.a.createElement(w.a,{key:e.dt,eventKey:"tab-".concat(n),title:o.title},r.a.createElement("div",{className:"chart"},r.a.createElement(M,{labels:o.labels,data:o.data,tickMax:Math.max.apply(Math,Object(y.a)(o.data))+(c===g?10:30),tickStep:c===g?1:3})))}))))},B=(n(79),function(){return r.a.createElement("div",{className:"detailed"},r.a.createElement("a",{href:"https://openweathermap.org/",target:"_blank"},"Detailed forecast")," \xb7 Data from OpenWeather")}),K=(n(80),function(e){var t=e.city;return r.a.createElement("div",{id:"location"},"".concat(t.name,", ").concat(t.country),r.a.createElement("br",null),r.a.createElement("small",null,"Updated a few minutes ago"))}),Z=(n(81),n(82),function(e){var t=e.current,n=e.timezone;return r.a.createElement("div",{className:"date-time"},r.a.createElement("div",null,t.weather[0].description),r.a.createElement("div",null,function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"\n  ".concat(C(n)," ").concat(n.getDate(),", ").concat(n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZone:"UTC"}),"\n  ")}(t.dt,n)))}),J=(n(83),function(e){var t,n,c=e.weather,o=e.changeUnit,i=Object(a.useContext)(b),l=c.current,u=c.daily,s=function(e){var t=e.weather[0].main,n=function(e){return e.dt>e.sunrise&&e.dt<e.sunset?"day":"night"}(e);switch(t){case"Rain":return L.a;case"Clouds":return"day"===n?D.a:N.a;default:return"day"===n?z.a:R.a}}(l),m=function(e){return Math.round(i===g?e:_(e))},d=function(e){return"unit"===e?i===g?"C":"F":i===g?"F":"C"};return r.a.createElement("div",{id:"current-info"},r.a.createElement("div",{id:"icon"},r.a.createElement("img",{src:s,alt:"weather logo"})),r.a.createElement("div",{id:"temperature"},r.a.createElement("div",null,m(l.temp)),r.a.createElement("div",null,r.a.createElement("div",null,"\xb0",d("unit")),r.a.createElement("div",null),r.a.createElement("div",{onClick:o},d("button")))),r.a.createElement("div",{id:"min-max"},r.a.createElement("div",null,m(u[0].temp.max),"\xb0"),r.a.createElement("div",null,m(u[0].temp.min),"\xb0")),r.a.createElement("div",{id:"extra-info"},r.a.createElement("div",null,"Vision: ",(n=l.visibility,i===g?"".concat(Math.round(n/1e3)," KM"):"".concat(Math.round(n/1609)," M"))),r.a.createElement("div",null,"Wind: ",(t=l.wind_speed,i===g?"".concat(Math.round(t)," KMPH"):"".concat(Math.round(t/1.609)," MPH"))),r.a.createElement("div",null,"Humidity: ",l.humidity,"%")))}),Y=function(e){var t=e.data,n=Object(a.useState)(g),c=Object(m.a)(n,2),o=c[0],i=c[1],l=t.threeFive,u=t.oneCall;return r.a.createElement(b.Provider,{value:o},r.a.createElement("div",{className:"card"},r.a.createElement(K,{city:l.city}),r.a.createElement(J,{weather:u,changeUnit:function(){i(o===g?E:g)}}),r.a.createElement(Z,{current:u.current,timezone:u.timezone_offset}),r.a.createElement(I,t),r.a.createElement(B,null)))};function G(e){return 0===Object.entries(e).length}function X(e,t,n){var a=function(e,t){var n;return n=null===t?"?q=".concat(e):"?lat=".concat(t.lat,"&lon=").concat(t.lng,"&exclude=minutely,hourly,alerts"),"".concat(n,"&appid=").concat("06e049b7e07cd7c2f35f0fc665d48535","&units=metric&lang=en")}(t,n);return"".concat("https://api.openweathermap.org/data/2.5/").concat(e).concat(a)}function q(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=X("forecast",null,t),r=X("onecall",null,t),e.next=5,Promise.all([fetch(a).then((function(e){return e.json()})),fetch(r).then((function(e){return e.json()}))]).then((function(e){n.threeFive=e[0],n.oneCall=e[1]})).catch((function(e){console.log("fetch ERROR: ",e)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return $.apply(this,arguments)}function $(){return($=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=X("forecast",t,null),e.next=4,fetch(a);case 4:if(!(r=e.sent).ok){e.next=10;break}return e.next=8,r.json().then(function(){var e=Object(s.a)(u.a.mark((function e(t){var a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={lat:t.city.coord.lat,lng:t.city.coord.lon},r=X("onecall",null,a),e.next=4,fetch(r);case 4:if(!(c=e.sent).ok){e.next=8;break}return e.next=8,c.json().then((function(e){n.threeFive=t,n.oneCall=e,n.ok=!0}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("fetch city ERROR: ",e)}));case 8:e.next=12;break;case 10:return e.next=12,r.json().then((function(e){n.ok=!1,n.error=e}));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(84);var ee=n(23),te=n(51),ne=function(e){return r.a.createElement("span",null,r.a.createElement(te.a,Object.assign({color:"#767676",size:"lg"},e)))},ae=n(52),re=n(53),ce=n(60),oe=n(58),ie=n(35),le=function(e){Object(ce.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(ae.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).mapClicked=function(t,n,a){var r={lat:a.latLng.lat(),lng:a.latLng.lng()};e.props.setMarker(r)},e}return Object(re.a)(n,[{key:"render",value:function(){return this.props.google?r.a.createElement("div",{style:{position:"relative",height:"calc(60vh)"}},r.a.createElement(ie.Map,{zoom:2,onClick:this.mapClicked,google:this.props.google,initialCenter:{lat:15.5007,lng:32.5599}},G(this.props.marker)?null:r.a.createElement(ie.Marker,{draggable:!0,position:this.props.marker,icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}}))):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),ue=Object(ie.GoogleApiWrapper)({apiKey:"AIzaSyD3s785xPg5XvFY5XOBUy6JiyOIcZOsyFQ"})(le),se=n(113),me=n(111),de=(n(103),function(e){var t=e.show,n=e.close,a=e.children,c=e.onSubmit,o=function(){return n()};return r.a.createElement(se.a,{show:t,onHide:o,centered:!0,size:"lg"},r.a.createElement(se.a.Body,null,a),r.a.createElement(se.a.Footer,null,r.a.createElement(me.a,{variant:"light",size:"sm",onClick:o},"Close"),r.a.createElement(me.a,{variant:"info",size:"sm",onClick:function(){c(),n()}},"Search Location")))}),fe=function(e){var t=e.onMapSubmit,n=Object(a.useState)(!1),c=Object(m.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)({}),u=Object(m.a)(l,2),s=u[0],d=u[1],f=function(e){return i(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{icon:ee.a,size:"xs"}),r.a.createElement("small",{onClick:function(){return f(!0)}},"use google maps"),r.a.createElement(de,{show:o,close:function(){return f(!1)},onSubmit:function(){G(s)||t(s)}},r.a.createElement(ue,{marker:s,setMarker:d})))},pe=(n(104),function(e){var t=e.search,n=e.setSearch,a=e.onFormSubmit;return r.a.createElement("form",{onSubmit:function(e){return a(e)}},r.a.createElement("input",{placeholder:"search city",value:t,onChange:function(e){return n(e.target.value)}}),t.length?r.a.createElement(ne,{icon:ee.c,onClick:function(){return n("")}}):null,r.a.createElement(ne,{icon:ee.b,color:"#1287A5",onClick:function(e){return a(e)}}))}),he=function(e){var t=e.getWeather,n=Object(a.useState)(""),c=Object(m.a)(n,2),o=c[0],i=c[1];return r.a.createElement("div",{id:"search-bar"},r.a.createElement(pe,{search:o,setSearch:i,onFormSubmit:function(e){e.preventDefault(),o.trim().length>0&&t(null,o.trim())}}),r.a.createElement(fe,{onMapSubmit:function(e){i(""),t(e)}}))};var ve=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({}),l=Object(m.a)(o,2),g=l[0],E=l[1],b=Object(a.useState)({}),y=Object(m.a)(b,2),w=y[0],k=y[1];Object(a.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={lat:t.coords.latitude,lon:t.coords.longitude},O(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("Use Effect fired!")}),[]);var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("fetching: ",e,t),c(!0),E({}),null!==t?V(t).then((function(e){e.ok?k(Object(i.a)({},e)):E(Object(i.a)({},e.error)),c(!1)})):q(e).then((function(e){k(Object(i.a)({},e)),c(!1)}))};return r.a.createElement(d.a,{id:"app"},r.a.createElement("div",null,r.a.createElement(f,null,"OpenWeather App"),r.a.createElement(he,{getWeather:O}),n?r.a.createElement(h,null):G(g)?G(w)?r.a.createElement(p,null):r.a.createElement(Y,{data:w}):r.a.createElement(v,null,g.message,", try using map instead.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(105),n(106),n(107);o.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,n){e.exports=n.p+"static/media/Day.aa6f8ece.svg"},42:function(e,t,n){e.exports=n.p+"static/media/DayCloud.3797634d.svg"},43:function(e,t,n){e.exports=n.p+"static/media/Raining.30ac9d7c.svg"},49:function(e,t,n){e.exports=n.p+"static/media/Night.31ba1d2d.svg"},50:function(e,t,n){e.exports=n.p+"static/media/NightCloud.70a0d01f.svg"},61:function(e,t,n){e.exports=n(108)},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},76:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.efa9a036.chunk.js.map