(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);n(62);var a=n(0),r=n.n(a),c=n(8),i=n.n(c),o=(n(67),n(68),n(36)),l=n(10),u=n(112),s=0,m=1,d=r.a.createContext(s),f=n(59),p=n(110),h=n(114),v=(n(69),function(e){var t=e.activeTab,n=e.children;return r.a.createElement(h.a,{defaultActiveKey:t,mountOnEnter:!0,bsPrefix:"nv",variant:"weather-tabs"},n)}),g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function E(e){return g[e.getDay()]}function b(e){return 9*e/5+32}n(75);var y=n(24),O=n.n(y);O.a.pluginService.register({beforeRender:function(e){e.config.options.showAllTooltips&&(e.pluginTooltips=[],e.config.data.datasets.forEach((function(t,n){e.getDatasetMeta(n).data.forEach((function(t,n){e.pluginTooltips.push(new O.a.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips,_active:[t]},e))}))})),e.options.tooltips.enabled=!1)},afterDraw:function(e,t){if(e.config.options.showAllTooltips){if(!e.allTooltipsOnce){if(1!==t)return;e.allTooltipsOnce=!0}e.options.tooltips.enabled=!0,O.a.helpers.each(e.pluginTooltips,(function(e){e.initialize(),e.update(),e.pivot(),e.transition(t).draw()})),e.options.tooltips.enabled=!1}}});var w=function(e){var t=e.labels,n=e.data,c=e.tickMax,i=e.tickStep,o=Object(a.useRef)();return Object(a.useEffect)((function(){new O.a(o.current,{type:"line",data:{labels:t,datasets:[{data:n,backgroundColor:"#fef9cc",borderColor:"#fbe000",borderWidth:1}]},options:{bezierCurve:!1,showAllTooltips:!0,maintainAspectRatio:!1,responsive:!0,layout:{padding:{left:0,right:0,top:0,bottom:0}},tooltips:{backgroundColor:"white",caretSize:0,bodyFontSize:12,bodyFontFamily:"Roboto, Helvetica, Sans-Serif",bodyFontColor:"#666",displayColors:!1,yAlign:"bottom",yPadding:0,caretPadding:6,callbacks:{title:function(e,t){return""},label:function(e,t){return"".concat(t.datasets[0].data[e.index],"\xb0")}}},legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#666",fontFamily:"Roboto, Helvetica, Sans-Serif",fontSize:11}}],yAxes:[{display:!1,ticks:{beginAtZero:!0,suggestedMax:c,stepSize:i}}]}}})})),r.a.createElement("canvas",{ref:o})},k=n(41),x=n.n(k),S=n(42),j=n.n(S),C=n(49),M=n.n(C),T=n(50),D=n.n(T),z=n(43),F=n.n(z);function A(e){switch(e.weather[0].main){case"Rain":return F.a;case"Clouds":return j.a;default:return x.a}}var R=function(e){var t=e.day,n=e.timezone,c=Object(a.useContext)(d),i=function(e){return Math.round(c===s?e:b(e))};return r.a.createElement("div",{className:"daily-card"},r.a.createElement("div",null,function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"".concat(E(n)," ").concat(n.getDate())}(t.dt,n)),r.a.createElement("div",null,r.a.createElement("img",{src:A(t),alt:"weather"})),r.a.createElement("div",null,i(t.temp.max),"\xb0"),r.a.createElement("div",null,i(t.temp.min),"\xb0"))},U=function(e){var t=e.threeFive,n=e.oneCall,c=Object(a.useContext)(d),i=n.daily.slice(0,5),o=n.timezone_offset,l=function(e){return e.map((function(e){return function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"".concat(n.toLocaleTimeString([],{hour:"numeric",timeZone:"UTC"}))}(e.dt,o)}))},u=function(e){return e.map((function(e){return t=e.main.temp,Math.round(c===s?t:b(t));var t}))},m=function(e,t){return{title:function(e){return r.a.createElement(R,{day:e,timezone:o})}(e),labels:l(t),data:u(t)}},h=function(e,t){var n=[],a=-1;return e.forEach((function(e,t){var r=function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),n}(e.dt,o).getDate();r!==a&&n.push(t),a=r})),e.slice(n[t],n[t]+8)};return r.a.createElement("div",{className:"daily-weather"},r.a.createElement(v,{activeTab:"tab-0"},i.map((function(e,n){var a=h(t.list,n),i=m(e,a);return r.a.createElement(p.a,{key:e.dt,eventKey:"tab-".concat(n),title:i.title},r.a.createElement("div",{className:"chart"},r.a.createElement(w,{labels:i.labels,data:i.data,tickMax:Math.max.apply(Math,Object(f.a)(i.data))+(c===s?10:30),tickStep:c===s?1:3})))}))))},N=(n(78),function(){return r.a.createElement("div",{className:"detailed"},r.a.createElement("a",{href:"https://openweathermap.org/",target:"_blank",rel:"noopener noreferrer"},"Detailed forecast")," ","\xb7 Data from OpenWeather")}),L=(n(79),function(e){var t=e.city;return r.a.createElement("div",{id:"location"},"".concat(t.name,", ").concat(t.country),r.a.createElement("br",null),r.a.createElement("small",null,"Updated a few minutes ago"))}),_=(n(80),n(81),function(e){var t=e.current,n=e.timezone;return r.a.createElement("div",{className:"date-time"},r.a.createElement("div",null,t.weather[0].description),r.a.createElement("div",null,function(e,t){var n=new Date(0),a=e+t;return n.setUTCSeconds(a),"\n  ".concat(E(n)," ").concat(n.getDate(),", ").concat(n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZone:"UTC"}),"\n  ")}(t.dt,n)))}),P=(n(82),function(e){var t,n,c=e.weather,i=e.changeUnit,o=Object(a.useContext)(d),l=c.current,u=c.daily,m=function(e){var t=e.weather[0].main,n=function(e){return e.dt>e.sunrise&&e.dt<e.sunset?"day":"night"}(e);switch(t){case"Rain":return F.a;case"Clouds":return"day"===n?j.a:D.a;default:return"day"===n?x.a:M.a}}(l),f=function(e){return Math.round(o===s?e:b(e))},p=function(e){return"unit"===e?o===s?"C":"F":o===s?"F":"C"};return r.a.createElement("div",{id:"current-info"},r.a.createElement("div",{id:"icon"},r.a.createElement("img",{src:m,alt:"weather logo"})),r.a.createElement("div",{id:"temperature"},r.a.createElement("div",null,f(l.temp)),r.a.createElement("div",null,r.a.createElement("div",null,"\xb0",p("unit")),r.a.createElement("div",null),r.a.createElement("div",{onClick:i},p("button")))),r.a.createElement("div",{id:"min-max"},r.a.createElement("div",null,f(u[0].temp.max),"\xb0"),r.a.createElement("div",null,f(u[0].temp.min),"\xb0")),r.a.createElement("div",{id:"extra-info"},r.a.createElement("div",null,"Vision: ",(n=l.visibility,o===s?"".concat(Math.round(n/1e3)," KM"):"".concat(Math.round(n/1609)," M"))),r.a.createElement("div",null,"Wind: ",(t=l.wind_speed,o===s?"".concat(Math.round(t)," KMPH"):"".concat(Math.round(t/1.609)," MPH"))),r.a.createElement("div",null,"Humidity: ",l.humidity,"%")))}),W=function(e){var t=e.data,n=Object(a.useState)(s),c=Object(l.a)(n,2),i=c[0],o=c[1],u=t.threeFive,f=t.oneCall;return r.a.createElement(d.Provider,{value:i},r.a.createElement("div",{className:"card"},r.a.createElement(L,{city:u.city}),r.a.createElement(P,{weather:f,changeUnit:function(){o(i===s?m:s)}}),r.a.createElement(_,{current:f.current,timezone:f.timezone_offset}),r.a.createElement(U,t),r.a.createElement(N,null)))},H=(n(83),function(e){return r.a.createElement("h1",{id:"app-title"},e.children)}),I=function(e){var t=e.children;return r.a.createElement("small",{style:{color:"red"}},t)},K=(n(84),function(){return r.a.createElement("div",{className:"help-text"},r.a.createElement("p",null,r.a.createElement("strong",null," Search engine is very flexible. How it works:"),r.a.createElement("br",null),"To make it more precise put the city's name, comma, 2-letter country code (ISO3166). You will get all proper cities in chosen country. The order is important - the first is city name then comma then country. Example - London, GB or New York, US."))}),B=function(){return r.a.createElement("div",null,"Loading...")};function Z(e){return 0===Object.entries(e).length}var J=n(17),Y=n.n(J),G=n(34);function X(e,t,n){var a=function(e,t){var n;return n=null===t?"?q=".concat(e):"?lat=".concat(t.lat,"&lon=").concat(t.lng,"&exclude=minutely,hourly,alerts"),"".concat(n,"&appid=").concat("06e049b7e07cd7c2f35f0fc665d48535","&units=metric&lang=en")}(t,n);return"".concat("https://api.openweathermap.org/data/2.5/").concat(e).concat(a)}function q(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(G.a)(Y.a.mark((function e(t){var n,a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=X("forecast",null,t),r=X("onecall",null,t),e.next=5,Promise.all([fetch(a).then((function(e){return e.json()})),fetch(r).then((function(e){return e.json()}))]).then((function(e){n.threeFive=e[0],n.oneCall=e[1]})).catch((function(e){console.log("fetch ERROR: ",e)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return $.apply(this,arguments)}function $(){return($=Object(G.a)(Y.a.mark((function e(t){var n,a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=X("forecast",t,null),e.next=4,fetch(a);case 4:if(!(r=e.sent).ok){e.next=10;break}return e.next=8,r.json().then(function(){var e=Object(G.a)(Y.a.mark((function e(t){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={lat:t.city.coord.lat,lng:t.city.coord.lon},r=X("onecall",null,a),e.next=4,fetch(r);case 4:if(!(c=e.sent).ok){e.next=8;break}return e.next=8,c.json().then((function(e){n.threeFive=t,n.oneCall=e,n.ok=!0}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("fetch city ERROR: ",e)}));case 8:e.next=12;break;case 10:return e.next=12,r.json().then((function(e){n.ok=!1,n.error=e}));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(86);var ee=n(22),te=n(51),ne=function(e){return r.a.createElement("span",null,r.a.createElement(te.a,Object.assign({color:"#767676",size:"lg"},e)))},ae=n(52),re=n(53),ce=n(60),ie=n(58),oe=n(35),le=function(e){Object(ce.a)(n,e);var t=Object(ie.a)(n);function n(){var e;Object(ae.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).clickedOrDraged=function(t,n,a){var r={lat:a.latLng.lat(),lng:a.latLng.lng()};e.props.setMarker(r)},e}return Object(re.a)(n,[{key:"render",value:function(){return this.props.google?r.a.createElement("div",{style:{position:"relative",height:"calc(60vh)"}},r.a.createElement(oe.Map,{zoom:2,onClick:this.clickedOrDraged,google:this.props.google,initialCenter:{lat:15.5007,lng:32.5599}},Z(this.props.marker)?null:r.a.createElement(oe.Marker,{draggable:!0,onDragend:this.clickedOrDraged,position:this.props.marker,icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"}}))):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),ue=Object(oe.GoogleApiWrapper)({apiKey:"AIzaSyD3s785xPg5XvFY5XOBUy6JiyOIcZOsyFQ"})(le),se=n(113),me=n(111),de=(n(105),function(e){var t=e.show,n=e.close,a=e.children,c=e.onSubmit,i=function(){return n()};return r.a.createElement(se.a,{show:t,onHide:i,centered:!0,size:"lg"},r.a.createElement(se.a.Body,null,a),r.a.createElement(se.a.Footer,null,r.a.createElement(me.a,{variant:"light",size:"sm",onClick:i},"Close"),r.a.createElement(me.a,{variant:"info",size:"sm",onClick:function(){c(),n()}},"Search Location")))}),fe=function(e){var t=e.onMapSubmit,n=Object(a.useState)(!1),c=Object(l.a)(n,2),i=c[0],o=c[1],u=Object(a.useState)({}),s=Object(l.a)(u,2),m=s[0],d=s[1],f=function(e){return o(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{icon:ee.a,size:"xs"}),r.a.createElement("small",{onClick:function(){return f(!0)}},"use google maps"),r.a.createElement(de,{show:i,close:function(){return f(!1)},onSubmit:function(){Z(m)||t(m)}},r.a.createElement(ue,{marker:m,setMarker:d})))},pe=(n(106),function(e){var t=e.search,n=e.setSearch,a=e.onFormSubmit;return r.a.createElement("form",{onSubmit:function(e){return a(e)}},r.a.createElement("input",{placeholder:"search city",value:t,onChange:function(e){return n(e.target.value)}}),t.length?r.a.createElement(ne,{icon:ee.c,onClick:function(){return n("")}}):null,r.a.createElement(ne,{icon:ee.b,color:"#1287A5",onClick:function(e){return a(e)}}))}),he=function(e){var t=e.getWeather,n=Object(a.useState)(""),c=Object(l.a)(n,2),i=c[0],o=c[1];return r.a.createElement("div",{id:"search-bar"},r.a.createElement(pe,{search:i,setSearch:o,onFormSubmit:function(e){e.preventDefault(),i.trim().length>0&&t(null,i.trim())}}),r.a.createElement(fe,{onMapSubmit:function(e){t(e),o("")}}))};var ve=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({}),s=Object(l.a)(i,2),m=s[0],d=s[1],f=Object(a.useState)({}),p=Object(l.a)(f,2),h=p[0],v=p[1];return r.a.createElement(u.a,{id:"app"},r.a.createElement("div",null,r.a.createElement(H,null,"OpenWeather App"),r.a.createElement(he,{getWeather:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(!0),d({}),null!==t?V(t).then((function(e){e.ok?v(Object(o.a)({},e)):d(Object(o.a)({},e.error)),c(!1)})):q(e).then((function(e){v(Object(o.a)({},e)),c(!1)}))}}),n?r.a.createElement(B,null):Z(m)?Z(h)?r.a.createElement(K,null):r.a.createElement(W,{data:h}):r.a.createElement(I,null,m.message,", try using map instead.")))};n(107);i.a.render(r.a.createElement(ve,null),document.getElementById("root"))},41:function(e,t,n){e.exports=n.p+"static/media/Day.aa6f8ece.svg"},42:function(e,t,n){e.exports=n.p+"static/media/DayCloud.3797634d.svg"},43:function(e,t,n){e.exports=n.p+"static/media/Raining.30ac9d7c.svg"},49:function(e,t,n){e.exports=n.p+"static/media/Night.31ba1d2d.svg"},50:function(e,t,n){e.exports=n.p+"static/media/NightCloud.70a0d01f.svg"},61:function(e,t,n){e.exports=n(108)},69:function(e,t,n){},75:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},86:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.3da7d937.chunk.js.map